<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> call apply bind JSON | 葛鹏</title><meta name="description" content="call apply bind JSON - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/scss/casual.css"><link rel="stylesheet" href="/css/icon.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="葛鹏"></head><body><div class="header"><header class="site-header"><div class="site-nav"><span class="button-toggle"></span><div class="container"><div class="nav-item"><a href="/" target="_self" data-text="home">主页</a></div><div class="nav-item"><a href="/archives" target="_self" data-text="archive">归档</a></div><div class="nav-item"><a href="/about" target="_self" data-text="about">关于</a></div><div class="nav-item"><a href="/atom.xml" target="_self" data-text="rss">订阅</a></div></div><form id="search-form" class="nav-item"><input type="text" id="local-search-input" name="q" results="0" placeholder="搜索" autocomplete="off" autocorrect="off" class="search form-control"><span onclick="resetSearch()" class="fa fa-times"> </span></form><div id="local-search-result"></div><p class="no-result">No results found</p></div></header></div><div class="main"><div class="container"><div class="content"><div class="post"><article class="post-block"><h1 class="post-title">call apply bind JSON</h1><span class="post-date">2017年5月2日</span><span class="post-review">阅读次数 : <span data-hk-page="current">-</span></span><div class="post-content"><h3 id="原型深入"><a href="#原型深入" class="headerlink" title="原型深入"></a>原型深入</h3><p>getElementsByName的上下文必须是document</p>
<p>creatElement 上下文也是document</p>
<h4 id="call"><a href="#call" class="headerlink" title="call"></a>call</h4><p>所有的函数都有一个属性length，表示参数的数量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    function fn() &#123;</div><div class="line">        console.log(this)</div><div class="line">        console.log(n + m);</div><div class="line">    &#125;</div><div class="line">    console.log(fn.length);</div><div class="line">    //fn.__proto__</div><div class="line">    console.dir(Function.prototype);</div><div class="line">    console.log(Function.prototype.call.length);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>函数原型上的call方法是一个函数,这个方法至少要传一个参数，这个参数是用来改变前面的方法this的</p>
<p>call方法两个作用：</p>
<p>1.改变this</p>
<p>2.让当前函数（this）执行。</p>
<p>实例.call<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fn.call//call中的this是fn</div><div class="line"></div><div class="line">fn.call(obj)//1.将fn中的this替换成obj</div></pre></td></tr></table></figure></p>
<p>2.让fn执行</p>
<p>在非严格模式下，不传参数或者是传了个null，undefined，默认是window。在严格模式下undefined”use strict”，不传或者是传了个null，undefined，是将this变成了undefined.  (严格模式一般用在封装组件或函数方法的时候)</p>
<p>call方法从第二个参数开始就是给前面的函数传的参数</p>
<p>当使用函数.call.call()，两个及两个以上的call你传的参数不是一个函数就会报错。因为只有函数的原型上才会有call这个方法</p>
<p>换句话说，你用两个及两个以上的call方法执行的时候，相当于你把传进来的那个函数执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">fn.call(obj,1,2);</div><div class="line">   Function.prototype.call=function (obj) &#123;</div><div class="line">        this  //实例</div><div class="line">    &#125;</div><div class="line">    fn.call()//</div><div class="line">    //fn.call.call(obj)-&gt;obj.call()</div><div class="line"></div><div class="line"></div><div class="line">    function ff() &#123;</div><div class="line">        console.log(&quot;hh&quot;)</div><div class="line">    &#125;</div><div class="line">    [].constructor.call.call(ff)</div></pre></td></tr></table></figure>
<h4 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h4><p>“use strict”//严格模式</p>
<p>在严格模式下，函数执行的时候，前面没有点，this-&gt;undefined<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function fn() &#123;</div><div class="line">        console.log(this);</div><div class="line">   &#125;</div><div class="line">    fn()</div><div class="line">    Window.fn();</div></pre></td></tr></table></figure></p>
<p>2.<br>call()不传参数 ，</p>
<p>或传了个unll -&gt; this=null，undefined-&gt; this=undefined</p>
<p>fn.call();//undefined</p>
<p>fn.call(null);//null</p>
<p>fn.call(undefined);//undefined</p>
<h4 id="call方法的深入"><a href="#call方法的深入" class="headerlink" title="call方法的深入"></a>call方法的深入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Function.prototype.call=function () &#123;</div><div class="line">    this()</div><div class="line">&#125;;</div><div class="line">function f() &#123;</div><div class="line">    console.log(this,&quot;f&quot;);</div><div class="line">&#125;</div><div class="line">function ff() &#123;</div><div class="line">    console.log(this,&quot;ff&quot;)</div><div class="line">&#125;</div><div class="line">f();</div><div class="line">f.call();</div><div class="line">f.call.call(ff);//1.改变的是f.call中的this，2.然后f.call()也就是执行this()-&gt;ff()</div><div class="line">f.call.call.call(ff);//1.改变的是f.call.call中的this，2f.call.call 执行就是this()-&gt;ff()</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">function f1(n) &#123;</div><div class="line">    console.log(this,n)</div><div class="line">&#125;</div><div class="line">function f2(m,w) &#123;</div><div class="line">    console.log(this,m,w)</div><div class="line">&#125;</div><div class="line">f1.call();</div><div class="line">f1.call.call(f2,1);</div><div class="line">参数f2是用来改变f1.call中的this，参数1是给f1.call传参数数的</div><div class="line">1.f1.call中的this变成f2</div><div class="line">2.f1.call(1) call方法中是让this(),我们现在把this变成f2,也就是让f2(),</div><div class="line">3.将f2中的this变成了1，1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">f1.call.call.call(f2,1,2,3);</div><div class="line">  f1.call.call(1,2,3)  中this变成f2</div><div class="line">  f2.call(1,2,3)</div><div class="line"></div><div class="line">  两个及两个以上的call(fn,obj,n,m,...)</div><div class="line">  fn:必须是函数</div><div class="line">  obj是用来改变fn的this</div><div class="line">  n,m..:给fn 传的参数</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function dd(n,m) &#123;</div><div class="line">        console.log(this,n,m)</div><div class="line">    &#125;</div><div class="line">    function bb(x,y) &#123;</div><div class="line">        console.log(this,x,y)</div><div class="line">    &#125;</div><div class="line">    var obj=&#123;n:1,m:2&#125;;</div><div class="line">    dd.call(null,1,2);</div><div class="line">    dd.call.call(dd,1,1);</div><div class="line">    dd.call.call(bb,obj,1,2,3,4,4,1);</div><div class="line">    dd.call.call.call.call(bb,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;);</div><div class="line">    bb.call(&quot;1&quot;,&quot;1&quot;,&quot;1&quot;);</div></pre></td></tr></table></figure>
<p>call:记住三句话：</p>
<p> 1.改变前面方法的this，不管前面有多少东西</p>
<p> 2.让前面方法执行，不管前面有多长</p>
<p> 3.call方法最终执行的一句核心是this()</p>
<p>外加的：两个及两个以上的call。最后一个call的第一个参数是来改变前面call方法中的this，那么this()就变成了第一个参数执行，所以第一个参数必须是函数，否则会报错</p>
<h4 id="call将类数组转为数组"><a href="#call将类数组转为数组" class="headerlink" title="call将类数组转为数组"></a>call将类数组转为数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">try&#123;</div><div class="line">        console.log(a);</div><div class="line">        a=1;</div><div class="line">        //先执行try里面的代码，如果报错了就执行catch里面的代码</div><div class="line">    &#125;catch(e)&#123;</div><div class="line">        //e是一个对象，里面存着错误信息，存在e.message，这里面存着try里面的错误信息</div><div class="line">        console.log(e.message);</div><div class="line">        //throw new Error(&quot;我错了&quot;);</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>call在IE低版本不支持<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">function toArray(likeArray) &#123;</div><div class="line">    var ary=[];</div><div class="line">    try &#123;</div><div class="line">        return Array.prototype.slice.call(likeArray,0);</div><div class="line">    &#125;</div><div class="line">    catch (e)&#123;</div><div class="line">        for (var i=0;i&lt;likeArray.length;i++)&#123;</div><div class="line">            ary.push(likeArray[i])</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        return ary</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">function fn() &#123;</div><div class="line">    return toArray(arguments)</div><div class="line">&#125;</div><div class="line">console.log(fn(1, 3, 4, 5, 6, 7, 8, 9));</div></pre></td></tr></table></figure></p>
<h4 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h4><p>Function.prototype.appl</p>
<p>apply 跟call意思和用法一样，区别是：apply第一个参数也是改变this用的，第二个参数是一个数组，这个数组是给前面的方法传参数的，将数组里面的每一项一个一个传给函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function fn(x,y)</div><div class="line">    this.x=x+y;</div><div class="line">        this.y=x-y;</div><div class="line">        console.log(this.x,this.y,x,y)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fn(1,2);</div><div class="line">    fn.call(null,1,2);</div><div class="line">    fn.apply(undefined,[1,2])</div></pre></td></tr></table></figure></p>
<h4 id="apply求数组最大值"><a href="#apply求数组最大值" class="headerlink" title="apply求数组最大值"></a>apply求数组最大值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">var ary=[2,4,6,18,9,34,10];</div><div class="line">    //1.排序</div><div class="line">    function MAX1(ary) &#123;</div><div class="line">        return ary.sort(function (a,b) &#123;</div><div class="line">            return b-a</div><div class="line">        &#125;)[0]</div><div class="line">    &#125;</div><div class="line">    console.log(MAX1(ary));</div><div class="line">    //2.eval</div><div class="line">    function MAX2(ary) &#123;</div><div class="line">        //return eval(&quot;Math.max(&quot;++&quot;)&quot;)</div><div class="line">        return eval(&quot;Math.max(&quot;+ary+&quot;)&quot;)</div><div class="line">    &#125;</div><div class="line">    console.log(MAX2(ary));</div><div class="line">    //3.apply</div><div class="line">    //Math.max.apply(null,ary)</div><div class="line">    function MAX3(ary) &#123;</div><div class="line">        return Math.max.apply(null,ary)</div><div class="line">    &#125;</div><div class="line">    console.log(MAX3(ary));</div><div class="line">    //4.假设法</div><div class="line">    function MAX4(ary) &#123;</div><div class="line">        var max=ary[0];</div><div class="line">        ary.forEach(function (item,index) &#123;</div><div class="line">            max=item&gt;=max?item:max;</div><div class="line"></div><div class="line">        &#125;)</div><div class="line">        return max</div><div class="line">    &#125;</div><div class="line">    console.log(MAX4(ary));</div></pre></td></tr></table></figure>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><p>bind 在IE低版本不兼容，只改变函数this返回一个新的函数，原来的函数不变，不会让函数执行。  以后在事件中常用，我们会自己写一个兼容任何浏览器的方法。   (返回的新的函数和原函数长的一样，只是this是obj，fn是不变的)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    var a=2;</div><div class="line">    function fn() &#123;</div><div class="line">        console.log(this.a);</div><div class="line">    &#125;</div><div class="line">    var obj=&#123;a:1&#125;;</div><div class="line"></div><div class="line">    fn();//window</div><div class="line">    var fn1=fn.bind(obj);  //可以传参数，一般不传，fn.bind(obj,1) 输出到控制台是分两步显示</div><div class="line">    fn1();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h4 id="检测数据类型"><a href="#检测数据类型" class="headerlink" title="检测数据类型"></a>检测数据类型</h4><p>1.typeof 返回值是一个字符串，如果用两个及以上的typeof检测的话返回值”string”，但是他有局限性，能详细检测基本数据类型，但是null不行，检测出来的是object，对于引用数据类型不能详细检测只有object和function</p>
<p>2.instanceof 检测一个实例是否属于某个类，因为每一种数据类型都对应自己所属的类，所以我们可以通过他来检测数据类型，但是也有局限性，对于基本疏忽类型 用字面量创建方式穿件的变量检测不出来，构造函数创建方式可以，引用数据类型可以详细检测。</p>
<p>3.类原型上的constructor，每个类的原型(prototype)上都有一个constructor属性，他指向类本身，那么一个具体的数据类型的实例.constructor。比如”11”.constructor -&gt;”11”.<strong>proto</strong>-&gt;String.prototype，String原型上有constructor指向String本身，你也可以通过他的name来得到String类名，也就是它的数据类型</p>
<p>4.toString<br> 对象Object类的原型上有一个tostring，他可以检测数据类型，那么我们就调用Object.prototype.tostring()这个方法，将里面的this改变成我们想要检测的那个数据，会得到”[object 数据类型]”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    function fn1(n) &#123;</div><div class="line">        console.log(this);</div><div class="line">        console.log(n++,n);</div><div class="line">    &#125;</div><div class="line">    function fn2(n) &#123;</div><div class="line">        console.log(this);</div><div class="line">        console.log(n--,n);</div><div class="line">    &#125;</div><div class="line">    fn1();//NaN,NaN</div><div class="line">    fn1.call(null,12);//w  12   13</div><div class="line">    fn1.call.call(fn2);// w  n  n</div><div class="line">    fn1.call.call.call(fn2,10);//w   10   9</div><div class="line">    [].push.call.call(fn1,4);//</div><div class="line">    Array.call.call(fn2,6);//</div><div class="line">    [].constructor.call.call.call(fn1,8)</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">console</span>.dir(<span class="built_in">JSON</span>);</div><div class="line"><span class="comment">//1.JSON 是个对象，是window下的一个属性，也可以理解为是个全局变量，在IE低版本下没有</span></div><div class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">a</span>:<span class="string">"a"</span>,<span class="number">1</span>:<span class="number">1</span>&#125;</div><div class="line"><span class="comment">//JSON 对象与普通对象区别</span></div><div class="line"><span class="comment">//1.JSON的属性名用双引号包起来</span></div><div class="line"><span class="comment">//2.属性值如果是字符串的话，也得用双引号包起来</span></div><div class="line"><span class="keyword">var</span> jsonObj=&#123;<span class="string">"a"</span>:<span class="string">"a"</span>,<span class="string">"1"</span>:<span class="number">1</span>,<span class="string">"age"</span>:<span class="number">12</span>,<span class="string">"ary"</span>:[<span class="number">1</span>,<span class="number">2</span>]&#125;;</div><div class="line"><span class="comment">//json 字符串，一般从后台获取回来的数据都是json字符串</span></div><div class="line"><span class="keyword">var</span> jsonStr=<span class="string">'&#123;"a":"a","1":1,"age":12,"ary":[1,2]&#125;'</span>;</div><div class="line"><span class="comment">//JSON.parse()将json格式的字符串转为json格式的对象</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(jsonStr).ary);</div><div class="line"><span class="comment">//JSON.stringify()将json格式的对象转为json格式的字符串</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(jsonObj));</div><div class="line"><span class="comment">//在IE下没有JSON就用eval来实现</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse</span>(<span class="params">jsonStr</span>) </span>&#123;</div><div class="line">    <span class="comment">//如果浏览器种有JSON就用它</span></div><div class="line">    <span class="keyword">try</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(jsonStr)</div><div class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">eval</span>(<span class="string">"("</span>+jsonStr+<span class="string">")"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//否则用eval</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse</span>(<span class="params">jsonStr</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span><span class="string">"JSON"</span><span class="keyword">in</span> <span class="built_in">window</span>?<span class="built_in">JSON</span>.parse(jsonStr):<span class="built_in">eval</span>(<span class="string">"("</span>+jsonStr+<span class="string">")"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="DOM映射"><a href="#DOM映射" class="headerlink" title="DOM映射"></a>DOM映射</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">li</span>&#123;</div><div class="line">          <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">          <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">          <span class="attribute">-webkit-user-select</span>: none;</div><div class="line">          <span class="attribute">font-family</span>: <span class="string">"微软雅黑"</span>;</div><div class="line">          <span class="attribute">font-size</span>: <span class="number">16px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">ul</span>,<span class="selector-tag">li</span>&#123;</div><div class="line">          <span class="attribute">list-style</span>: none;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-id">#news</span>&#123;</div><div class="line">          <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">          <span class="attribute">margin</span>: <span class="number">20px</span> auto;</div><div class="line">          <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">2px</span> <span class="number">2px</span>;</div><div class="line">          <span class="attribute">border</span>: <span class="number">2px</span> dashed darkgrey;</div><div class="line">          <span class="attribute">background-color</span>: azure;</div><div class="line">          <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-id">#news</span> <span class="selector-tag">li</span>&#123;</div><div class="line">          <span class="attribute">line-height</span>: <span class="number">40px</span>;</div><div class="line">          <span class="attribute">color</span>: blue;</div><div class="line">          <span class="attribute">padding-left</span>: <span class="number">10px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li0</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: bisque;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li1</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: navajowhite;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li2</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: silver;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li3</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: gainsboro;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li4</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: peachpuff;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">li</span><span class="selector-class">.li5</span>&#123;</div><div class="line">          <span class="attribute">background-color</span>: seashell;</div><div class="line">      &#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;ul id="news"&gt;</div><div class="line">&lt;li class="li0"&gt;珠峰开课了~&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;script TYPE="text/javascript"&gt;</div><div class="line">    var jsonData=[&#123;</div><div class="line">        "content":"赵四出轨~",</div><div class="line">        "class":"li1"</div><div class="line">    &#125;,&#123;</div><div class="line">        "content":"白百何离婚了~",</div><div class="line">        "class":"li2"</div><div class="line">    &#125;,&#123;</div><div class="line">        "content":"郭富城结婚了~",</div><div class="line">        "class":"li3"</div><div class="line">    &#125;,&#123;</div><div class="line">        "content":"五一假期过完了~",</div><div class="line">        "class":"li4"</div><div class="line">    &#125;,&#123;</div><div class="line">        "content":"端午节不放假啊~",</div><div class="line">        "class":"li5"</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    var news=document.getElementById("news");</div><div class="line">    var oLis=news.getElementsByTagName("li");</div><div class="line">    console.log(oLis);</div><div class="line">    oLis[0].onmouseover=function () &#123;</div><div class="line">        this.style.backgroundColor="plum";</div><div class="line">    &#125;;</div><div class="line">    oLis[0].onmouseout=function () &#123;</div><div class="line">        this.style.backgroundColor="bisque";</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">        for (var i=0;i&lt;jsonData.length;i++)&#123;</div><div class="line">        var oLi=document.createElement("li");</div><div class="line">        oLi.innerHTML=jsonData[i]["content"];</div><div class="line">        oLi.className=jsonData[i]["class"];</div><div class="line">        news.appendChild(oLi);</div><div class="line">    &#125;</div><div class="line">    console.log(oLis);</div><div class="line">    var aryLis=[];</div><div class="line">    for (var i=0;i&lt; oLis.length;i++)&#123;</div><div class="line">       aryLis.push(oLis[i])</div><div class="line">    &#125;</div><div class="line">    console.log(aryLis);</div><div class="line">    aryLis[3].id="li3";</div><div class="line"></div><div class="line">    DOM映射：</div><div class="line">通过DOM方法获取的一个元素集合（类数组），这个集合仍然和页面的元素保持着联系，并且这个元素集合会随着页面元素的增加而增加，减少而减少，即使把这个类数组转为一个数组，每个元素仍然和页面有联系，这就叫做DOM映射</div><div class="line">--&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">&lt;!--</div><div class="line">回流：</div><div class="line">元素的位置发生改变（增加元素，删除元素，移动）引起回流，让整个页面重新渲染一遍，从而造成的性能的浪费</div><div class="line">重绘：元素的样式发生改变，就会把当前的这个元素重新渲染一遍</div><div class="line">所以在以后项目中，能用重绘代替的就不用回流，能用一次回流就不要使用多次</div><div class="line"></div><div class="line"></div><div class="line">向页面增加元素的方式</div><div class="line">1.动态创建的方式document.createElement，然后一个一个appendChild，会造成多次回流，这样不好，但是他有个好处是不会改变原来的元素（比如不会影响他之前绑定的事件）</div><div class="line">2.通过拼接字符串，最后在一次性通过innerHTML ,这样只会引起一次回流，比较好，但是，他会改变原来的元素（比如会影响他之前绑定的事件）</div><div class="line">3.文档碎片，他就是一个容器专门来盛放DOM元素的</div><div class="line"></div><div class="line">--&gt;</div><div class="line">&lt;script type="text/javascript"&gt;</div><div class="line"></div><div class="line">    var flg=document.createDocumentFragment();</div><div class="line">    for (var i=0;i&lt;jsonData.length;i++)&#123;</div><div class="line">        var oli=document.createElement("li");</div><div class="line">        oli.innerHTML=jsonData[i].content;</div><div class="line">        oli.className=jsonData[i].class;</div><div class="line">        flg.appendChild(oli);</div><div class="line">    &#125;</div><div class="line">    news.appendChild(flg);</div><div class="line">    flg=null;//用完了 没有用了，就清空</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;!--</div><div class="line">步骤：</div><div class="line">1.先创建元素,var oli=document.createElement("li")</div><div class="line">2.按需求给元素增加一些需要的属性</div><div class="line">3.暂时存放在flg(DOM碎片)中,也是flg.appendChild(oli)进去的</div><div class="line">4.循环完之后，把整个flg放到ul中，news.appendChild(flg)</div><div class="line">这样只会引起回流一次</div><div class="line">--&gt;</div></pre></td></tr></table></figure>
</div></article></div><div class="post-paginator"><div class="post-links"><div class="post-prev"><a href="/2017/04/25/基于GitHub搭建自己的博客/" class="prev">上一篇<span>基于GitHub搭建自己的博客</span></a></div><div class="post-next"><a href="/2017/07/01/git/" class="next">下一篇<span>git</span></a></div></div></div><div id="uyan_frame"></div></div><div class="sidebar"><div class="social-links"><ul><li class="social-link"><a href="https://github.com/gepeng820" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a target="_self" class="link-twitter"><i class="icon icon-twitter"></i></a></li><li class="social-link"><a href="http://weibo.com/u/2787759474/home?wvr=5" target="_blank" class="link-weibo"><i class="icon icon-weibo"></i></a></li><li class="social-link"><a href="mailto:496636462@qq.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div><div class="recent-posts widget"><h3 class="widget-title"> 近期文章</h3><div class="widget-content"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/02/node特点以及模块模块引用还有npm与yarn/">node特点以及模块还有npm与yarn</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/01/git/">git</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/call-apply-bind-JSON/">call apply bind JSON</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/基于GitHub搭建自己的博客/">基于GitHub搭建自己的博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/hello-world/">Hello World</a></li></ul></div></div><div class="recent-comment widget"><h3 class="widget-title"> 近期评论</h3><div class="widget-content"><div id="uyan_newcmt_unit"></div></div></div><div class="tag-lists widget"><h3 class="widget-title"> 标签</h3><div class="widget-content"></div></div><div class="archive-lists widget"><h3 class="widget-title"> 归档</h3><div class="widget-content"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li></ul></div></div></div></div></div><footer><div class="copyright"><div class="container"><div class="col-6"><div class="site-info">© 2016 - 2017 <span class="icon icon-heart"></span> <a href="http://yoursite.com"></a><span class="sep">/</span><a href="https://hexo.io/" target="_blank">Powered by Hexo</a><span class="sep">/</span><a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">Theme by casual</a></div></div><div class="col-6"><div class="site-contact"><div class="social-links"><ul><li class="social-link"><a href="https://github.com/gepeng820" target="_blank" class="link-github"><i class="icon icon-github"></i></a></li><li class="social-link"><a target="_self" class="link-twitter"><i class="icon icon-twitter"></i></a></li><li class="social-link"><a href="http://weibo.com/u/2787759474/home?wvr=5" target="_blank" class="link-weibo"><i class="icon icon-weibo"></i></a></li><li class="social-link"><a href="mailto:496636462@qq.com" target="_self" class="link-mail"><i class="icon icon-mail"></i></a></li></ul></div></div></div></div></div></footer><a class="scroll-up"><span class="icon icon-up"></span></a><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/posfixed.js"></script><script src="/js/utils.js"></script><script src="/js/search.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2128137"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-92791318-1",'auto');ga('send','pageview');</script><script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script><script src="http://jerry-cdn.b0.upaiyun.com/hit-kounter/hit-kounter-lc-0.2.0.js"></script></body></html>